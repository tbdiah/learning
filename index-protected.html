<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
<title>Online Learning: M&amp;E of TB Programs</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@200;300;400;500;600;700;800&family=Libre+Franklin:ital,wght@0,300;0,400;0,500;0,700;0,800;1,300;1,400;1,600;1,700&family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet"> 
<link href="css/pass-protect.css" rel="stylesheet" type="text/css">
  </head>
  </head>
  <body>
    <iframe id="contentFrame" frameBorder="0" allowfullscreen></iframe>
    <div id="dialogWrap">
        <div id="dialogWrapCell">
            <div id="mainDialog">
                <div id="dialogText">This page is password protected.</div>
                <div id="passArea">
                    <p id="passwordPrompt">Password</p>
                    <input id="pass" type="password" name="pass" autofocus>
                    <div>
                        <span id="messageWrapper">
                            <span id="invalidPass" class="error">Sorry, please try again.</span>
                            <span id="trycatcherror" class="error">Sorry, something went wrong.</span>
                            <span id="success" class="notifyText">Success!</span>
                            &nbsp;
                        </span>
                        <button id="submitPass" type="button">Submit</button>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                <div id="securecontext" class="error">
                    <p>
                        Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
                    </p>
                </div>
                <div id="nocrypto" class="error">
                    <p>
                        Your web browser appears to be outdated. Please visit this page using a modern browser.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="attribution">
        Protected by <a href="https://www.maxlaumeister.com/pagecrypt/">PageCrypt</a>
    </div>
    <script>
    (function() {

        var pl = "exmn0Ayv/Br561FAmaX9eRyT+Fy3ob4WCX5245AuZqrxCtZA3ZVqKD29XUcPXDjW1NlMift1ypfTkAPC4yoYGarUvjFNtnhdut73rCDLWUFgkmQsDuknMffMFm9fMORtXgrzEJKHnSRRl4myNlZakzBMr0jo0i0aPnB2bZoFljNUIibs3IBG64D18B2k8y8LVxJaqI3lUiP6Q7iGYsG1ZIO/c65N9cgqT3j5yi+JyFaooXYMypghDrWZJYKYsfYY8bgGE/mhBkpx4kql28kcwq2jvu0O6D/Qf+CjCp7sDJivWyHEuKtPIU1Rhr6Gjizz6WCr7JryUEDDwxRURvnL7oWUBFPKauRGb7C62B/MmOi1KqVkoDSfjMW09rSHp/CKgP3FKYRrZE9DfVeU4FBZ/42Q5MZJU2qEkHKgHPv7+j6xr4jWKQY2Y2TYoKmOI46hg7OOajQhc119eg9whYRIXkrt1NyLHEb81IdTTIGD4QByDwauH+zMT3P2SxdP8PwdAqMXxLRdQzicCA9XBSyNeomx7bXF79CtrxS9uRsw3OgBGbP0Ya+hyHadB6DKoCXI9nz/bqxvqVnzpcySs/xTa4wPFTD8JJ7W3d8tlGP4tmyNOhHeXhv+RkgpWZBm1Zj4IZjLnRpc2CRK3G5UbeBbHIh0L4xqxGh1lJ9NvZUmyepKbjH4t61aNVBa1dzzec/RwhY+bF6rhPfhKdRTtRV9giSQGIyX2wj+yo0TjfItBki8kfyR7Ie1Msa3FcEFNpvGfv06Cn9t+rliv3u933MXabHI/PUFKfsxVn2aanaTBzGW3fJFINtSBFFYjqxXZK7o4sqcR3JG9coSwpqGJKgYI/bqNdSq7iXjWy4WJj14KTQIoE0kZyoFOV1yoybqcKZO0BtySfiJf/gYSqNjCt03wy9vmojXVzaPvYL71tQA7UVqUtEJZ6tTROZu6vR2k79gsn3F6JkIQhD2tCCNQUTqGmxIEIqx70AJZN/atVizGw1nTfYlTGQ0YB7wWZZt5LQkrG1FFFi+kONl0pX/z+sUeHIcMXZsa8akq8Ok6BYo6NwM8iGWf2N1WlEcJp+PjPbsAdfPAWpHUVaflpwpqHSRj6U+IuPJxrzUffRPHikQSN+/6s/CyISAqsJj5l08KzGahKpJu7g7KRh+vXt7UOC01BtwwzfGIScMpvQ9fEwhjQ7jLVueqpgXXF/ggixaCoz6EIc85wqCLEQwIP/iIcI+fCBdwxfLSpLto/AtqkcjSRSWXaa0Oh64gH6P7ebGF+ar+IuOV3IxNnvm7ZUY2lARV2VQEpDQ1TN5RUaEr8lQX/NteCeAIcoLTvaoJqNVFf8+ovNK6NGnm8E8+djB9y6CdPDJNzsA9Tk1smHqnHdfbHbwwLoxheZ7zyAAEwngMg11M4PBtXCKQQ6rwSrFVIyTsRSLgALZ+EONxDFhC06TzDb+nI2o30lp0K6NWoCSffEQhuNWu/pXVxGvU5ItlrCRjutbGF+zIZoMPwUZSBe9lqqq2nOWk7+HVLCf/0bV9O+MWY5gvG8CBuPLQ0iDrail/pIOh5Fv/XnSG/YJU9jZwM9c0ewXIBc9G3oRXJp4Y4r0AtwZJvmnHvu8SZCZuWzIhHRL7mWv8nJ8Arx6rQGrPc734p18eX3sFZJTj6xZo7K7fln7VYJjZkvMSIe3k9kDHx60IaHRx4jPu3rxuu2fQNGy9n4XH4d8Z58ZWNf8oSn/sfYJpSdcFG3SEVumvDTJNY741zX0xrht8G5Xy989pxkJ8Em7KBnaeObQz8nE+uVlYt0nswtGo/DZiTQNc7UStKIzdhVg0xSHz74nZIBdQE0yidk8nwlWIHE2diT5raL1AuU4Rshx0KMIBhtMCGhfu9RY77PxhH3L8/22hQ9PBV41BMizRY+L9qumiGiEGVLwa3fwq8NLy7LE2kEK/ERUiP6RKq+wHd1KLq7ojwVQYZGOZzckavs/LngP1zzfsvtADNkGwCYIisqb5yIUdq8/ZHEJO7oxq5vwe0HiFlCCgS5HAdNhpI6FZqGrPYmtluzsyQs1NCVVHbxEVFf3SjqJ3H2kikoxpixTlfaec2VadqBM8UbjKMMf5i6aXutLmlF5wBMh4MVoZUAGUNNfEOJTgwFvxyuDnXdqWnpvlbW4njKTF3ZdHr8SaQJJat0efYnghqwMIXBaTEJ+P1ZdC7Lm0Vbuiqvl2lOgd/hD/9uOh0YiuDOsLETjuRjAb4MbwXLrBrzSnaKBJRj6/dgQW4kCXRtwj+NeBJxFqRxRhP10yzA+eV/CLmCALu5WRH2KP1ghDKRfg3gUI+HCoG2BCpzOuTwEyeSPrx4tWNtQg9Z+UG0Prary39B68OnhzzDnZczgWDjTWYVJez7gVJQkPBwHmUW5t2lTmah9V66JDUGXXGrTS854VlHgrwUkULB/k6yHX9aTBdVkf9DG2+xevZ5kobHoOtG7vwmEQucBUYdvdi4Sz4EH1DMT9J1VdnR4VUGc/W2m4amiPxUaXG0w2sDpF4eFF6/fvblZfu07A9AXTZ4uyfmE+AcrhYxYM1O8pGIwh/8aW9TUuik2uyBJ08NBtrYEk+UOAzinDM7d+Oy2/Rn7/FEKVm+vQVQeU3a7xm1OGr0ih0PPsImiXu1PwAGZATUaTTygx0DStqMJphueadQTACkVozg2k/1PWAiKoVSehByZjG8b2D8ulxYIHTrSP68KptudWsYb6fMl6p8oFlN0mtq/M4fP5feD3KEefyEAu4DZg6dHmldw9dV80ra6l7YWfnDOwNHgpA8TtrwG7kkP37V+/56NdsHKZlvyf2xl9IlMfCzoaYZCO5EGKI94En7xtLChEyOLltZxl2VwLI2cxv9nQltMhnVEvgdUHOrUP3v+RD65Mbs2JUgiiIp+xrmKKeYP7KNN8IO5XJDyPR4S2zD8wkjKIFTOGiRkRIW9YuA1ZaE8Kv1VUentoXKsU2xYumvJeVOQaVuUp7P4w3cXFvJWk16O+eX5nsjpHY1OdBTPElbL7eUXm4MqWFHwkvBvHMPWlwlSq+AKoFqU8mUmTjev2ocDdLdSeAGVcVvieUlfq8UNaj6e3muNikrleVjmTR0aWXwR8OnrmDSzMxFtwsq4GmMzdk1AZowibgQAbdF5WXAvNW6p55N7AjYInbls4iQ8RYqO3d0Lsd10RYHU71vvaJlZ6oBUJxEY0zFWaV4fHfvKjwqovazTRj+XRRQfsjgUOd1OgXfZhc1EemysyNo8SUzaVJ1/n1Lfe3kKhM5HeQm2ibVS0FQ/M8S+ofwrqUhWenCIBDcnLijwRYfjIUpob3aTiGlxECz3q4ph1tVF5eBW1YL3AAnO2trip9g2fKwCPJxVAtUAu9MXVfrsNSWvErd2WVl0W7fvaCkJcawzWPpziWS9poeFLnLMRLGr4upQ0Gzg7MiE2qyA4KaKyI4XTGDy056rISqqIb2p3SZOHMzrNnpoLz+q1Pjcb0aC/pPNKqKIGu/6ZNoOZ1ZkuV01xYqO/CPJMoHt0dGC1GlTbrZOtnTffN6S6PeT6DxcsD/djBpC8eRV3Kw6u01kOWUeqg5GPLRwzYwJYCRn4DiZjSDlCa+IdtZh/IH8o97AuARGwSFJTKDcBZ3r3ssSKnG1Bjv3Ics6iOjxX5pl9JpTvnaEcawDItZYtkCsLFV76f2xJ6HGqlIHzFcIx3yMUZXSmMLarAzZt3M+jdl3dsXR5TMQfputyNdeM6TiEgSlb2bzSdvskuCPDfUEiHXvCYbM69IBdE+I7gkOvIqqdiR+7EI0Q6aS4Ot/M0ix+vMbIsFGhyYgf6l0Q6PHXjrydWDsG5Q1JjS9pDo2IrfM/4S5P1NwIwCGli/Afw8a76YbbtQOW4jQQDnFhr2CFZnUj5HMdpo2PydMroymk0hChIE/H3Dk3PkHiT13Dfc4fLcG1DPUQ3gBbE10mN2vUf9xS9hYwXCv3lRXgiJeVHNS31oP1AVxofJL+CJZed7YzgzzXl9vZZK6ZqFIOvwCTHYnqkBGGAXydBX2DPAAbxixhNQ0qARaelK3iNWd14dvYBB43ZOZtrLjSV63YmzgsYWc6pM7pq6R/WlsE5AFI0PWlKrXOFHGJWnpJkOJbAe1kbKbzAD37Q5Itvn6NIWckEO20snWhPVmwJKoqBXse6H3da18s1VqxrHl64Sm4QEhwd0k+pVMcR6WpanWWGFhqm8oGFcKU2oHCPqXUQiJuyCOgib7mVcOzq1neENuPSrEE+kXyLE1bmRVo8BwqTijqh7d0OtfV2nBdR8hOMwyXU78OPFIMaFOB0oUXAEDOR3GZpisWlqI/i//ijT83bBButzY6ZmSNfJfI7kR7yo7ZzTRuGESj7CHvO1cjkXrNtFABWhXUfbVd5B60YmU3VulwHCRCePm2UQHm9mlyKgbwpEnx+ecmXnOEyXeCxdQoIoLTeDF5tXvH+YdUx+ZPavbLwz+J1B7FcTbE1a+NRjF/rRKw4BG6Vaqf4V4RkNwB1AuXeSHhxKeAm7PAtqczPLyPCl7A6p39PpSWrTSKoeKKl4WwkYlO2QWHTQE5HvxaxXzzJEyTIpe1HoxFudUdsA4Cp7tsZMsuWVdQFPulaIAQKFUjiuAJZCN6v1gFUWSRjrDLRVmvCQUNWGQhzHECLDBRd0aITa7bX81d43DRjQORRwCxD13e2HEah8OXFecDhfs3nLLnLSfBu3+3vHnJlMfrWLow0KxJF61VGX3svGQjdIY/QKwDr3edmJfxu6D/li569j7amjdk0xXiauV52x/c+fsE/MkoPXvtl2UVlJbSWIbLUMHO9c9g0c9yExJirzUIVMYfzrnJXsFxl191tVbRQf5GaIHjw8VNTC25FixoTIO6RhygAtClHw+jwzIcoPKK22taUjkVyCYx554jjGT18qb6IKQg/Pvh0RVS7JtiAEiMCvFMK76SjhTW6kiaMkdhsPzc9nDxEmHxBfw8Tcfek5riFAbqnz2ewT3Xcurp73/tatlwmHtMUK38Bvj2P+VLk1HFcnY8yALQYXsar776vY44ueHwwVGeq/qD3TcVStX19XyyfJa61HqYNRBUw/kufjhJisqo6iphDHklCfgwC7Np4LNN+v24Lg9AClTgEPkobGE7oF61sQnZwM5vBACDsndTYfY++wUejm3vocWkHW5BYaCeer6EhSRdYD7sxZ0zvkkqhyI3LXTTxGzScodXJGyitAFPD0BJ32HsKRpk5KS5D7hFgqYu1t2QO9SkUcsGHBXZOXDIn9bN7zBiA2H6jQ5KV9iSpTICn9EHSEa4HtFSxTMfpYeH5z2TXXRoN6Q8WejAR/YnuqEHEuIvQ4GKW0CfVqKCo8j8edveTFekojN9orqPyIm4M34KqF9/fOoa0fMJ9nJ9d/4sRmj9gBfn3lX5/gj+aWNdlYjJpvEY1dgqrzyuCRn0XLlqmMKZo+mAX83M7IkfEH1Jg0wccMSEvQOIONU5sIu6m+sXR+VXBPbCCw3ulQvN5okSYpPtMm/f1fmFJ30U6bQz3jkAtZ2kP5oDFWCoPSNNPaoOa5jH1HwdlDT86dNNR4C7V/8Y42Hhwo6hNBgSXdGc4QL1ok3SBgETAOvfYOcEO/4g5uVig74I1LuXaG7TQC5tmTNnbGcOn9x60vVtKbAA54cIAYihqa1ckKfknvw5ngeTq8hr+1K5uKD/0NpbaSEYI4HQ5r/LOmEBQHHDh6TjaPF3lFSCECTKvbeociD5PuPGdSx3HowerfF3kWA4giPsE5teI/NvTX8LMPYgkRt2dCJnf+wteHdUNpgp+m1kSekJG4KpAIwORZmpXKnzrOt/sO/DixgwoaRTJIPqWrJWs1HZQXmvJBCDa+sTV+JtfriuWOioH+Ghk5FP/FZlL7M3QX9uDebbAFyreAXpo4DBxF28cEbjQZ1AWLizNE2XzipTSNSJO2z40d+I/qXxsHLwqF5EIl1JHjdZwc+7BCCvUNQMFIlorpYMoUqAeSahbGnxfIYn5kEDsk8GRoPf9VTA8CwiNZhw6gZJ+LaJf1Yn9z/5CkZE5N9bkYiere4UM1rJVLZr98TTIri2c5gMdJI4unAuh+lhXl1y97meN41uCqX3ZI1m8ony5KLVAmgu7EAQdVZkGMsO2OD0zlPz1Y7ObE5B/7SoOmFVrkXcZzE3164BuBHE7RMvcfp5h6IYHH7GT1y58mL/Z0xV+WOZ8ENMCoo3rrXLQ+fg/jbNw2rlxZQzRKCkQKVYzX2o4spjd72v+MjM6dlsaKA0zOcSN7/Wh/OZInD7qYGhqv2Zyb5u+Nsa7FoYNe0VtHTHMOVSBShCpWoeTcSnakeC0mTlDQEaEI3VYTB7Wqr3D+QVty/WjtMWSwcYqa4pDBHJ/Pbet1Nc7bwc9KGGhJu8yNTWfUqZ3pfbZTHTcUt5ote9sv0AMgeC51MHdnYMhBobBcclbAsv7DF1p1T5U6KfWQ7ySNZO2jE1fHZPGgR2cEiZck3X6/fbGZj9LCHFr4Ol1xl4dH0PgV+wqCN3DYU6JJowar8kknVaGIX+liNtXwHGKfouUY4y4ed2auQI+XubGPRCVt69EjfwfR0QQwdhT2x9feUbLB6bcA9wsDx32bklhIbYBlVA3sE2SYypY2sgcxovmQitPuUaC5MyFDNhfhWBxTbDT+ki40V2sl1ThhA2QBQ3SXqlF6I+YQWHSvz7zZ1gi/j59ZNRoCfk5qUXxC9smIb5Ffm5lQYrN3coV39qOEMCbUKO14PrzvuYU7wpBVIwPE0kO5+BpGkhuRdHPVHdy47ZCNdokkLH+ezKDZBmbnaXfvSzah/f6X4J206w8pzevuao70j+rzxeO7T0qBaGf8F4J+7VB/cj2ZKIZqpNHrpRrdWvCdPyuQUKkkwGq8bTixEvPQYrGYeFd3SN1MerjAAw8vZtJSD9GAaaydYjcgyBHwWQeGgRVUUDUOlIRzCIOnuQH5knVTt4a8Nk6k1S8hE0MiWeWGHEA07gfxQGEYcIkBdROuLQ2WWAPZ8GKWPFC9JmPRn65NYkRLRvPqQlqpOXzeYSC/h3+IlY+oviY4bkpxA9p1qUIjRfHvuggEC6yq3Eb3K/ZpzINFH8Txi7kPN32o9dibPNBxBPdGMkFRp/blodZR0rpJSla7o2fZFDodKRDrKiUZ4KslLgVqkNEYI0noa7n6gOwqh6VeAoFj06FPY3i7rsZRSXWbhaxyBp2/5+hiRkhInv14nEx9vbK+8LUSkXJPHeG2li+rOdVtf9qnT3x052LDfvykzlKzltJvebDuUzDA7uBR3uTouE+ddThrg28IpUvdGJSBzR0mk3ewAOUBwI4Lk8Sr9xcWnZZnj4IXh+Yom2Er5x5XE1RMeG61MRM7Ho6LGm60btLr2ui++Gyi91Hy748VwS/lY4GHRcNdIA4/lxGUqhwCJ2YLC3YdGp2XuXFBsAhJK9zV+L8WVrtl8AiidfZtmXcQoHM7vfchmuJofsbirTQk6foCHJ2szLCR5hAsOryBP6/O40v/yPgTqnsE48bXg5HAETLMTNbiGT3Ox5r+be3SFPOn5UGsRqhbpeSbVf3QnxBIAUUfPTpupTU1Sca1O16Jt9JRQx7skSdVdAl6JSkbfirkDZa9u4lU3l0tFYQsjU68zKlddV05iSv7igD7CnzNRBwGVB4QrN1r6UTT2LmVMjFeFrjxolkAGHkB76bE+C8xy2RRxoB6U/4yFbGie6g1kNA3iezvOJsOosiQrY0098ZMWDPBMJSJPw79nSWJ7tCU9EaHdhlu9s9sYErhqU0IJoSzZcHBvC8urecCDDyljgWhxNXHX0wGwbaym/yLBcvvfaj87/4tF5KvsADlXteFDokyk1hsu4anVbthEXXgDfujxaxhz+AyGufwEjxXhmosU8GZ6NuOLuG0QYNMUbwUEQqgfJiQoaxh6Nzou4gBVQmVUOmfZdFYcMHXiwPCmWEijjsOGd6srbW0PwjN0EUOfJXFzoTjrcdnHb9hwhXpi4ewTGc2hfNfDv3B4e0ehwbkMv7tT/s+2cO/o51PyyCb+LeTaedAbh3j0NoErn4TmC45NG2p55Z38NhADNWpdjjm0HW2VHOOVsCOQocuiEYrx7pKR7TNipjpB+2fDJy4xTlhxcLWV/MW4khXONcl/or2Slpm1CqQh/zmRpAmVycW4asPAF7E/X941HFuplE9Vtm1b7I5TuDII6PZ5WEzKut5Meo5QmCj8FkU8gPlwrXuFB9WkLGaWr0vCiRyZ2kKWk4FBJn1pYDZSEw1ZlynN1lL8SZiNwftP4CwEuiDwQKR7ViQyFbm0m60NO86agpag+slNQoNu5Vo4ZYi+vb0TEQdoGmxUGP8O0u1NonsXsiUz/MRStVlhQ9L4u6CROdkmtnXOT8VHvzER+rnLLwjAChMko9p1VPQYjKijHeoxQkZgRrGJQ+/wgYE99Cx02AkcQRdd9dAkFr/oo1jQ7O3lG0C/0uF1Mf+cS4vSrQGuMUNRhG/pwsKqq0bzSVe1MMGlzCIaS3OyvMkR3ROAG9WYH2qVq6Pha7JeBNFEAMUKD2BFSj1vjuSbHWZ75YMogi1PDs+gPwPmfmAoV0zqoyug37eOTq9extLVweYnlToxcmFwcqB9RRupUSHy4awQTL2mL1Yrn0W6VmMOd7tPT2CbO35lLY8RdiY2pdO/6w0PLkUo2yA7RFBctViyFt2FkrxqwxFo2a2hqLp35qkV4noYkJWnb1y9LaLEhmlhpZqbosmXIZrp9NQRcUablPsQ/EX+2uFyZCOgH00q8STB32O0rO6CAbcFuwyiBCd20XAUzcyJmM0H8zC6QKrME/k0eT91QJzVRDv0BBbXpqlxkB32Mn7vh+aAgknKj86E9NB9AgT1VgnKdhsr9KxY1s8cTcrgvVrEfiNfNuhkM7oY7i9bw75bRNYenbFMxSKg95wx5998FQQohkTJfTL2svvibV1u2SRZM3r6TPd0CITMabs9MuRMaKrSJzed++pdGtXiXKDE31lknY8EZyelHBcZtWFA1Nt1KwPVAa89azNyBjdm6tVv+hu2YFxf1AscNQVsgvuH/BB9c13JoTfU6fUDBGqsNmXRzA5oZAOdbhKmocX1Bk/lkhC3tTgYOH6PXI8VTDkiv0e6QqMFlAjZirBQesxXR0a7i3XeYW+PhiEiwt9jCfQ8vUemai4+WkLz5epk5BvpZpMkDakZBBWyqnZOgrBwnEJC2+tQqlYxtueVHLwoWEBcEMxhfY9EC4thsc9WF1/7z9DYOSQT3nqrH/7E7bAo/bx4VmGAwo4AujuLAnsd41izIorjueZyc/Q6DP3Ul8TGE8oNNT+O4sW+uvLa29r0FmKmzcJ7SSmt70VxzVy1GTAJYndomawjQm5bNoc6P58O1EGrgYUY6bRpkcUDe1Gxt1BF7THnt+NHVzJbpZh9iko41IQKpdHhV4UJAciJ+LvARWc+35Bd4WwctVQqAqhSCKNT7rVDsGIZNhUwF7M2dlmnAsxHTLs8AYnHUXVh378AWcThSUGwr9X8wDF9gB3ZOdxpEIm9Wqqq2Q0NywUGXiuL8JC3dWbb+sfJQDHuDrGOZ/atHeHeTIQGMlpd7jpHeKAmsGgs25HsPxEpTBYJHmDTiVZNL4T9BStQi/a0cHrsHYCYecb90a8psKxfNkhNHXGXq/mo5yRLn9dUyRpwejp51zZmu1FBmRGHLKQaF3Ba7y19spGDgqRT46XaBiDrQJJgJa2jf5gyXtqakB7CKuz5u5/90GKEtUVi7/rxV4xfd/95CjzVRMsMSkJ5uf9ZDo+8LX+K8onpR7dqr/kFBbtux40DQBhhqXCfGbHbvaRr7mTUm/wbt5i9kH4C6yO5pm24tn7+Sa/5rs9gGnziT0ooaRAufF6UI3L309g8z7bBBhKn0bB5iYdSgcf1kBvCrkoFMd37rUHK8LIJEzHElpmK9UvPs4GsUB1EEy6Cat4NaOlV2gAChh+UYPpzPILUETX4ypSJFGdL5erUBoF1eKXDjFeYKxJblYdzaUxstIvyG6APoiRdA995HBTfQ4Ak8c/BVNfLw6afYmxFDLIbyGhLda2aAAEsvzwqxtTPzIlaR2WQ/AnyQLISxTTRwSNsKogYmQJUYRLjfMsIJxhOt8SoA+c04eulc8meQjIOj5abkrJ3l3FjGysC5cBOO80TFeuBGjXUaDm77M7gotV/fgCpOdQQ7Lu5bNt+SNl7F4iTJe78Uw+hwyNkdaCQMlZiPCHFiSX4ZpjvZ6AazGF80yQA//DIHdEHK1VKBi0Hr9sLzLIc4BbLjqZmdSyJxqw7fnPJztq+1YJ9TrjzGIDEQSI08ZFkbSDi0woDamORAE+1H5SGVdhgpB5du+CupaqQsNfkU3b4UI+Rhy/5CH7o5IDfuvtc9YjLXrU6ZXxgvW+QzpD/2e7yz0WOaACPxq8Cr9e9K5p8o/dE49+78Q7eUXpUqHZ9sige78OoepB+Cz48ZIVEqQQMO6evLwt7NlGqYeEGS3uECqJ+qUW3t53bCHoDLv00mtw5aTDHLUI3VhYqrTN5pRmVeuKXkEVgSG52oMAe+8fjDYpVB5wtBxSQXAd4AlKQ40q55MfRO2faviCNx3HWEn5Ylxwak01nfe98BLoki9DcuKc51Oh8pxhRxU2FXct7z/rHdlVofq901qvj/f4kKrtOCz38PSSO3nC92MCt67V29iMSM9WMXKtDzQZ6oKlTuLijCHIxP8Vq8P6YSMPCr2HGJczf6DoxAZx2KX1QVrwJSGpoWrXKkCogMQl0C0QX9LugobIcmH1jk0NICrw5ykpyhyreRM9u/GOlXz9RukRP/wmEUbFYOpZVx+gXr7amIox7bGP3S3kqrCuamYmEbkBXhwBbQUxW3DYVzatHDqMVf6W8IwEagL37OM1G2c+0fmgRxC3P0YDU5CcK5BnmQmUFHvpZnYcQVMf5mz9l2Jxg4OqSbsy6jdw8a1JqL1H53b5P3bsL/wuHOU1iKWG9i0S2qMkgnQ+Ve4mt3iXwt/zkMrIax+hdZlboEvIQP3Buiv3Hh70Rngr/j08KH/s0rELfhcvnv6XPdvA5KloQ/t28T0KEB3Rv42AJfW9ZzVZKgqN4JAVc1JzffqjJx5kfTsujstPK2baNbc2HdKxqKg1ZXepv0HxmcKopbBOgXoOKyQq0qkEY/ajtX3s1B3VqVjsq8DYkiDIHvYJRLsNBXWlPepVqrmgm8iuJFTipgnq2xVqDFGwhUJ0x+lNvhvnntIT4RUIVM1EDa8D5eNIg3WMJh2WHRei82JAau4iLA0NDzorKB6nnd1stKIBczZYIqkryRTsCBGp9e2Y0d1f/nrjzmG6ZGa8p0vTvSNnmpulXdp4JsNLAh7zCwLkDWl5xSKucxCo0SGojAyT+9rPuqB3TjXQQNr1NmKV3W2vUHootEeK7uDjyvlX51HOLtocnG2ykaDGsTnBZ4vsX+sNM4L4jTtosdgJM8C7cJYW4XpYB0PAdZ/bWEK1/Zd86I+X+g6gxJnwFUSaWocvG9VGeO/+mgQQtzKVuJoMe09E3fJkBM6SeyC6iALNI2Zy4TRRSlQIBGzC/R7GB8OhLjflcSpy6wwkiK2Qwa7VrLAIezL2UsLEKoisLpT4j6HtLOIHF255wLuvAP/blYhRYfz6ehfy5fNIAuw+wjRwVS6hxvs7YsXjWhRpvoQoLjdusBMfZY8KiSDDXuvPF2B55ou6TJmCNvBcAEJUdcpoTxAwzSYHnVCZkCmYAowq1/ddnaUJR6m2gR5Wdo/hX8K0qKAwb/H5w9embRlZuG8tyiMtuCUXWSXjFKaf1ZIucELUy45APOuH26w79abYnOkAfOMurWBufibImGZS8B0UIl9rrfVAfWSPHJa+y2FaS6kFF0iF43s4lDPxa+H5QBU9rw//A+pK1GNjIQKrsoZ7ws7msBdtEcIfd1rSXQH8lCFsCpCvn+5LVqmlubhg/8wUWMzG1TPDEgsEGSVbwT3d9CRG6Ni1n6Fg01OnVBjrQJ3nyypDL5nhZSoKI1VzKIzqSkfLGKcW9BRCbV8LllX40aMpS2lrzq8Xto6Un2F6tIh6tCOp60RW8XlX2t92C2E5Ud7mEUfJdyMeYD2OTjBsIImlGcQbEM4Qp6ghiMyYYGTNf4k1kfMhdWbIp7Q6klzdTudt/Sx+1MipcuTTJBJb/2mG83rkbGKmvhjdtmRriTaSweKT3jAWUXaJOnRGqp++2ffo7FUFR+rQ197QhHlFe8b2gG9i2uK2QXMZ6n/tBhqAwGim5eKRfBbacHJqxlVt3fggbL/KjzC1udlimNham/qzqjBSERKrGtuqdKxBC/DltRva2gcbXHUDDqMcotbhpGNwOiFtUUhqrRTuvcLKhfzk8HkBjaNsZpA6xXSqc6u26aEeQp1vxWVcd5CJXr3+qhK36slnGT6sYlsWftYjHTkLnWPYCJE/+Vcpl+6a6/MxlRTVW4xvt7s0rCz6rWGaOZW4//VHFHmzBeV+ORMJ4RfVdQsUVNMOyvBQbSwpRUfEccoxXNVSFV9Baw90brSUvqeQPp+BZsfklW2t5W7APpQWHJDhuq6u3M2/0IVSM6dIzxXTrww==";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 1000);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
